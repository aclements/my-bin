#!/bin/zsh

GARGS=()
while [[ $1 == -* ]]; do
    GARGS=($GARGS $1)
    shift
done

PROG=$1
shift
ARGS=$*

echo set args $ARGS > /tmp/gdb-args-$!

exec gdb $GARGS $PROG -x /tmp/gdb-args-$!
